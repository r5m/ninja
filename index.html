<!DOCTYPE html>
<html">
<head>
	<meta charset="utf-8" />
	<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<title></title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />

</head>

<body>

<div id="p_for_ids"></div>

<script src="//vk.com/js/api/openapi.js" type="text/javascript"></script>

<div id="login_button" onclick="VK.Auth.login(authInfo);"></div>

<script language="javascript">
VK.init({
  apiId: 4072941
});
function authInfo(response) {
  if (response.session) {
 //   alert('user: '+response.session.mid);
  } else {
 //   alert('not auth');
  }
}
VK.Auth.getLoginStatus(authInfo);
VK.UI.button('login_button');
/*
//VK.Api.call('users.get', {uids: 98184707}, function(r) {
//  if(r.response) {
//    alert('Привет, ' + r.response[0].uid);
//  }
//}); 

VK.Api.call('groups.isMember', {group_id: 68513505, user_id: 98184707, extended: 0 }, function(r) {
  if(r.response) {
    alert('Привет, ' + r.response);
  }
}); 

VK.Api.call('groups.getMembers', {group_id: 'game_of_thrones.club'}, function(r) {
  if(r.response) {
    alert('users, ' + r.response.users);
  } else {
	   alert('Gbpltw, ');
  }
	  
}); 

*/


/*
var p_for_ids = document.getElementById('p_for_ids');
//p_for_ids.innerHTML = p_for_ids.innerHTML + ' 22';

*/


VK.Api.call('groups.getById', {group_id: 'game_of_thrones.club', fields: 'members_count' }, function(r) {
  if(r.response) {
 // ms_count=r.response[0].members_count;
 
var index = 1;
var ms_count = 0;
var ms_offset = 0;
var ms_step = 999;

var timeoutId = 1;
 while (ms_offset<r.response[0].members_count) {
	console.log(ms_offset + '=' + ms_step + '=' + r.response[0].members_count);
	
		//setTimeout(function(){
		VK.Api.call('groups.getMembers', {group_id: 'game_of_thrones.club', offset: ms_offset, count: ms_step}, function(r) {
			var onResponse = function(r){
				if(r.response) {
				//  alert(ms_count);
				//console.log(r.response.users);
				

				r.response.users.forEach(function(entry) {
				//	console.log( index + ': ' + '*id' + entry + ' ' + ' ');
					p_for_ids.innerHTML = p_for_ids.innerHTML + '*id' + entry + ' ' + '(\')' + ' ' ;
					index = index + 1;
					
				});
				p_for_ids.innerHTML = p_for_ids.innerHTML + '</br></br> ';
				console.log(index);
			//   p_for_ids.innerHTML = p_for_ids.innerHTML + ' ' + r.response.users;
			} else {
	//			alert('Gbpltw, ');
				console.log('fuck');
			}
			}
			
			var waitInterval = setInterval(function(){			
				if(r.response){
					clearInterval(waitInterval)
					onResponse(r)
				}
		},500)
	  
		}); 
		//},1000*(timeoutId++))
 
  ms_offset = ms_offset + ms_step;
  
 }
 
 
 

  }
}); 



/*
VK.Api.call('groups.getMembers', {group_id: 'game_of_thrones.club', offset: 8000}, function(r) {
						
			if(r.response) {
				//  alert(ms_count);
				//	console.log(r.response.users);
				

				r.response.users.forEach(function(entry) {
				//	console.log( index + ': ' + '*id' + entry + ' ' + ' ');
					p_for_ids.innerHTML = p_for_ids.innerHTML + '*id' + entry + ' ' + ' ';
				//	index = index + 1;
					
				});
			//	p_for_ids.innerHTML = p_for_ids.innerHTML + '</br></br> ';
			//	console.log(index);
			//   p_for_ids.innerHTML = p_for_ids.innerHTML + ' ' + r.response.users;
			} else {
	//			alert('Gbpltw, ');
				console.log('fuck');
			}
	  
		}); 

*/

</script>







</body>
</html>
